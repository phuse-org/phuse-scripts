NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA.
NOTE: SAS (r) Proprietary Software 9.4 (TS1M2)
      Licensed to F. HOFFMANN LA ROCHE AG, Site 50701490.
NOTE: This session is executing on the X64_7PRO  platform.



NOTE: Updated analytical products:

      SAS/STAT 13.2
      SAS/ETS 13.2
      SAS/IML 13.2
      SAS/QC 13.2

NOTE: Additional host information:

 X64_7PRO WIN 6.1.7601 Service Pack 1 Workstation

NOTE: SAS initialization used:
      real time           17.26 seconds
      cpu time            6.56 seconds

1          OPTIONS mrecall sasautos=(%sysfunc(getoption(sasautos))
1  ! "C:\CSS\phuse-scripts\whitepapers\utilities");

2    %util_access_test_data(advs, local=C:\CSS\phuse-scripts\data\adam\cdisc\)
NOTE: Libref SOURCE was successfully assigned as follows:
      Engine:        XPORT
      Physical Name: C:\CSS\phuse-scripts\data\adam\cdisc\advs.xpt

NOTE: There were 32139 observations read from the data set SOURCE.ADVS.
NOTE: The data set WORK.ADVS has 32139 observations and 44 variables.
NOTE: DATA statement used (Total process time):
      real time           0.60 seconds
      cpu time            0.59 seconds


NOTE: Fileref SOURCE has been deassigned.
NOTE: Libref SOURCE has been deassigned.

3
4        /*** 2b) USER SUBSET of data, to limit number of box plot outputs, and to shorten Tx
4  ! labels ***/
5
6          data advs_sub (rename=(trtp_short=trtp));
7            set work.advs;
8            where (paramcd in ('DIABP') and atptn in (815)) or
9                  (paramcd in ('SYSBP') and atptn in (816));
10
11           length trtp_short $6;
12           select (trtp);
13             when ('Placebo')              trtp_short = 'P';
14             when ('Xanomeline High Dose') trtp_short = 'X-high';
15             when ('Xanomeline Low Dose')  trtp_short = 'X-low';
16             otherwise                     trtp_short = 'UNEXPECTED';
17           end;
18
19           drop trtp;
20         run;

NOTE: There were 5925 observations read from the data set WORK.ADVS.
      WHERE ((paramcd='DIABP') and (atptn=815)) or ((paramcd='SYSBP') and (atptn=816));
NOTE: The data set WORK.ADVS_SUB has 5925 observations and 44 variables.
NOTE: DATA statement used (Total process time):
      real time           0.26 seconds
      cpu time            0.26 seconds


21
22
23       %*--- 3) Key user settings ---*;
24
25         %let m_lb   = work;
26         %let m_ds   = advs_sub;
27
28         %let m_var  = AVAL;
29         %let lo_var = ANRLO;
30         %let hi_var = ANRHI;
31
32         %let jitter = Y;
33         %let ref_lines = UNIFORM;
34
35         %let p_fl = saffl;
36         %let a_fl = anl01fl;
37
38         %let max_boxes_per_page = 20;
39
40         %let outputs_folder = C:\CSS\phuse-scripts\whitepapers\WPCT\outputs_sas;
41
42     /*** end USER PROCESSING AND SETTINGS ***********************************
43      *** RELAX.                                                           ***
44      *** The rest should simply work, or alert you to invalid conditions. ***
45      ************************************************************************
46     ***/
47
48
49
50     /*** SETUP & CHECK DEPENDENCIES
51       Explain to user in case environment or data do not support this analysis
52
53       Keep just those variables and records required for this analysis
54       For details, see specifications at top
55     ***/
56
57       options nocenter mautosource mrecall mprint msglevel=I mergenoby=WARN ls=max ps=max;
58       goptions reset=all;
59       ods show;
Current OVERALL select list is: ALL
60
61       %let ana_variables = STUDYID USUBJID &p_fl &a_fl TRTP TRTPN PARAM PARAMCD &m_var &lo_var &hi_var AVISIT AVISITN ATPT ATPTN;
62
63       *--- Restrict analysis to SAFETY POP and ANALYSIS RECORDS (&a_fl) ---*;
64         data css_anadata;
65           set &m_lb..&m_ds (keep=&ana_variables);
66           where &p_fl = 'Y' and &a_fl = 'Y';
67         run;

NOTE: There were 4054 observations read from the data set WORK.ADVS_SUB.
      WHERE (saffl='Y') and (anl01fl='Y');
NOTE: The data set WORK.CSS_ANADATA has 4054 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


68
69       %*--- Global boolean symbol CONTINUE, used with macro assert_continue(), warns user of invalid environment. Processing should HALT. ---*;
70         %let CONTINUE = %assert_depend(OS=%str(AIX,WIN,HP IPF),
71                                        SASV=9.2+,
72                                        vars=%str(css_anadata : &ana_variables),
73                                        macros=assert_continue util_labels_from_var util_count_unique_values
74                                               util_value_format util_prep_shewhart_data
75                                       );
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. STUDYID is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. USUBJID is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. SAFFL is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANL01FL is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TRTP is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TRTPN is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. PARAM is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. PARAMCD is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRLO is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRHI is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVISIT is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVISITN is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ATPT is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ATPTN is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_MACRO_EXIST) PASS, found macro ASSERT_CONTINUE in "C:\CSS\phuse-scripts\whitepapers\utilities\assert_continue.sas".
NOTE: (ASSERT_MACRO_EXIST) PASS, found macro UTIL_LABELS_FROM_VAR in "C:\CSS\phuse-scripts\whitepapers\utilities\util_labels_from_var.sas".
NOTE: (ASSERT_MACRO_EXIST) PASS, found macro UTIL_COUNT_UNIQUE_VALUES in "C:\CSS\phuse-scripts\whitepapers\utilities\util_count_unique_values.sas".
NOTE: (ASSERT_MACRO_EXIST) PASS, found macro UTIL_VALUE_FORMAT in "C:\CSS\phuse-scripts\whitepapers\utilities\util_value_format.sas".
NOTE: (ASSERT_MACRO_EXIST) PASS, found macro UTIL_PREP_SHEWHART_DATA in "C:\CSS\phuse-scripts\whitepapers\utilities\util_prep_shewhart_data.sas".
NOTE: (ASSERT_DEPEND) Result is PASS.
76
77         %assert_continue(After asserting the dependencies of this script)
NOTE: (ASSERT_CONTINUE) After asserting the dependencies of this script. OK to continue.
78     /*** GATHER INFO for data-driven processing
79       Collect required information about these measurements:
80
81       Number, Names and Labels of PARAMCDs - used to cycle through parameters that have measurements
82         &PARAMCD_N count of parameters
83         &PARAMCD_VAL1 to &&&PARAMCD_VAL&PARAMCD_N series of parameter codes
84         &PARAMCD_LAB1 to &&&PARAMCD_LAB&PARAMCD_N series of parameter labels
85
86       Number of planned treatments - used for handling treatments categories
87         &TRTN
88     ***/
89
90       %*--- Parameters: Number (&PARAMCD_N), Names (&PARAMCD_NAM1 ...) and Labels (&PARAMCD_LAB1 ...) ---*;
91         %util_labels_from_var(css_anadata, paramcd, param)
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. PARAMCD is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. PARAM is a variable on data set CSS_ANADATA.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. PARAMCD is a variable on data set CSS_ANADATA.
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   proc sql noprint;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   select count(unique(paramcd)) into: paramcd_n from css_anadata ;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (UTIL_COUNT_UNIQUE_VALUES) Successfully created symbol PARAMCD_N = 2
MPRINT(UTIL_LABELS_FROM_VAR):   *--- Create paired sequences of symbols containing values and labels ---*;
MPRINT(UTIL_LABELS_FROM_VAR):   proc sort data=css_anadata out=css_lfv nodupkey;
MPRINT(UTIL_LABELS_FROM_VAR):   by paramcd param;
MPRINT(UTIL_LABELS_FROM_VAR):   run;

NOTE: There were 4054 observations read from the data set WORK.CSS_ANADATA.
NOTE: SAS sort was used.
NOTE: 4052 observations with duplicate key values were deleted.
NOTE: The data set WORK.CSS_LFV has 2 observations and 15 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds


MPRINT(UTIL_LABELS_FROM_VAR):   data _null_;
MPRINT(UTIL_LABELS_FROM_VAR):   set css_lfv;
MPRINT(UTIL_LABELS_FROM_VAR):   by paramcd;
MPRINT(UTIL_LABELS_FROM_VAR):   if not (first.paramcd and last.paramcd) then do;
MPRINT(UTIL_LABELS_FROM_VAR):   put "ERROR: (UTIL_LABELS_FROM_VAR) Each PARAMCD value should have exacly one PARAM value." paramcd= param=;
MPRINT(UTIL_LABELS_FROM_VAR):   put "ERROR: (UTIL_LABELS_FROM_VAR) Most likely you are missing some global symbols.";
MPRINT(UTIL_LABELS_FROM_VAR):   end;
MPRINT(UTIL_LABELS_FROM_VAR):   call symput(strip("paramcd_val"!!put(_n_, 8.-L)), strip(paramcd));
MPRINT(UTIL_LABELS_FROM_VAR):   call symput(strip("paramcd_lab"!!put(_n_, 8.-L)), strip(param));
MPRINT(UTIL_LABELS_FROM_VAR):   run;

NOTE: There were 2 observations read from the data set WORK.CSS_LFV.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


MPRINT(UTIL_LABELS_FROM_VAR):   proc datasets library=WORK memtype=DATA nolist nodetails;
MPRINT(UTIL_LABELS_FROM_VAR):   delete css_lfv;
MPRINT(UTIL_LABELS_FROM_VAR):   quit;
NOTE: Deleting WORK.CSS_LFV (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.29 seconds
      cpu time            0.15 seconds


NOTE: (UTIL_LABELS_FROM_VAR) Successfully created symbols for Values and Labels from PARAMCD and PARAM
92
93       %*--- Number of planned treatments: Set &TRTN from ana variable TRTP ---*;
94         %util_count_unique_values(css_anadata, trtp, trtn)
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_ANADATA is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_ANADATA, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TRTP is a variable on data set CSS_ANADATA.
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   proc sql noprint;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   select count(unique(trtp)) into: trtn from css_anadata ;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (UTIL_COUNT_UNIQUE_VALUES) Successfully created symbol TRTN = 3
95
96
97     /*** BOXPLOT for each PARAMETER and ANALYSIS TIMEPOINT in selected data
98       PROC SHEWHART creates the summary table of stats from "block" (stats) variables
99                     and reads "phases" (visits) from a special _PHASE_ variable
100
101      One box plot for each PARAMETER and ANALYSIS TIMEPOINT.
102      By Visit and Planned Treatment.
103
104      In case of many visits and planned treatments, each box plot will use multiple pages.
105
106      CLEANUP = O blocks the macro from deleting temp data sets after the last parameter & timepoint loop
107
108      TO DO: Confirm whether temp data sets should be explicitly deleted after each parameter & timepoint loop.
109             Could a left-over temp data set interfer with a subsequent loop?
110             Or are temp dsets always initialized within each loop?
111    ***/

112
113      %macro boxplot_each_param_tp(plotds=css_anadata, cleanup=1);
114
115        %local pdx tdx;
116
117        %do pdx = 1 %to &paramcd_n;
118
119          /*** LOOP 1 *****************************************************
120           *** Loop through each PARAMETER, working with ALL TIMEPOINTS ***
121           ****************************************************************/
122            data css_nextparam;
123              set &plotds (where=(paramcd = "&&paramcd_val&pdx"));
124            run;
125
126          %*--- Y-AXIS alternative: Fix Y-Axis MIN/MAX based on all timepoints for PARAM. See Y-AXIS DEFAULT, below. ---*;
127          %*   %util_get_var_min_max(css_nextparam, &m_var, aval_min_max)   *;
128
129          %*--- Analysis Timepoints for this parameter: Num (&ATPTN_N), Names (&ATPTN_NAM1 ...) and Labels (&ATPTN_LAB1 ...) ---*;
130            %util_labels_from_var(css_nextparam, atptn, atpt)
131
132
133          %do tdx = 1 %to &atptn_n;
134
135            /*** LOOP 2 ********************************************************************
136             *** Loop through each TIMEPOINT for this parameter, working with ALL VISITS ***
137             *** NB: PROC SORT here is REQUIRED in order to merge on STAT details, below ***
138             *******************************************************************************/
139              proc sort data=css_nextparam (where=(atptn = &&atptn_val&tdx))
140                         out=css_nexttimept;
141                by avisitn trtpn;
142              run;
143
144            %*--- Y-AXIS DEFAULT: Fix Y-Axis MIN/MAX based on this timepoint. See Y-AXIS alternative, above. ---*;
145              %util_get_var_min_max(css_nexttimept, &m_var, aval_min_max)
146
147            %*--- Number of visits for this parameter and analysis timepoint: &VISN ---*;
148              %util_count_unique_values(css_nexttimept, avisitn, visn)
149
150            %*--- Create format string to display MEAN and STDDEV to default sig-digs: &UTIL_VALUE_FORMAT ---*;
151              %util_value_format(css_nexttimept, &m_var)
152
153
154            *--- Calculate summary statistics, and merge onto measurement data for use as "block" variables ---*;
155              proc summary data=css_nexttimept noprint;
156                by avisitn trtpn;
157                var &m_var;
158                output out=css_stats (drop=_type_)
159                       n=n mean=mean std=std median=median min=min max=max q1=q1 q3=q3;
160              run;
161
162              *--- Reminder: PROC SHEWHART reads "phases" (visits) from a special _PHASE_ variable ---*;
163              data css_plot (rename=(avisit=_PHASE_));
164                merge css_nexttimept (in=in_paramcd)
165                      css_stats (in=in_stats);
166                by avisitn trtpn;
167                label n      = 'n'
168                      mean   = 'Mean'
169                      std    = 'Std Dev'
170                      min    = 'Min'
171                      q1     = 'Q1'
172                      median = 'Median'
173                      q3     = 'Q3'
174                      max    = 'Max';
175              run;
176
177
178            /*** Create TIMEPT var, Calculate visit ranges for pages
179              TIMEPT variable controls the location of by-treatment boxes along the x-axis
180              Create symbol BOXPLOT_TIMEPT_RANGES, a |-delimited string that groups visits onto pages
181                Example of BOXPLOT_TIMEPT_RANGES: 0 <= timept < 7|7 <= timept < 12|
182
183              NB: OUTPUT DSET of %util_prep_shewhart_data has _TP suffix.
184            ***/
185
186              %util_prep_shewhart_data(css_plot,
187                                       vvisn=avisitn, vtrtn=trtpn, vtrt=trtp, vval=&m_var,
188                                       numtrt=&trtn, numvis=&visn,
189                                       alsokeep=&lo_var &hi_var)
190
191              %util_annotate_outliers(css_plot_tp,
192                                      css_annotate,
193                                      x_var    = TIMEPT,
194                                      y_var    = &m_var,
195                                      low_var  = &lo_var,
196                                      high_var = &hi_var,
197                                      jitter   = &jitter,
198                                      numtrt   = &trtn)
199
200            *--- Graphics Settings - Default HSIZE and VSIZE are suitable for A4 and letter ---*;
201              options orientation=landscape;
202              goptions reset=all device=pdf;
203
204              title     justify=left height=1.2 "Box Plot - &&paramcd_lab&pdx by Visit, Analysis Timepoint: &&atptn_lab&tdx";
205              footnote1 justify=left height=1.0 'Box plot type=schematic, the box shows median, interquartile range (IQR, edge of the bar), min and max';
206              footnote2 justify=left height=1.0 'within 1.5 IQR below 25% and above 75% (ends of the whisker). Values outside the 1.5 IQR below 25% and';
207              footnote3 justify=left height=1.0 'above 75% are shown as outliers. Means plotted as different symbols by treatments.';
208              axis1     value=none label=none major=none minor=none;
209              axis2     order=( %util_axis_order(%scan(&aval_min_max,1), %scan(&aval_min_max,2)) );
210
211            *--- ODS PDF destination (Traditional Graphics, No ODS or Listing output) ---*;
212              ODS GRAPHICS OFF;
213              ODS LISTING CLOSE;
214              ods pdf author='PhUSE/CSS Standard Analysis Library'
215                      subject='PhUSE/CSS Measures of Central Tendency'
216                      title="Boxplot of &&paramcd_lab&pdx by Visit for Analysis Timepoint &&atptn_lab&tdx"
217                      file="&outputs_folder\WPCT-F.07.01-sas92-QCshewhart_Box_plot_&&paramcd_val&pdx.._by_visit_for_timepoint_&&atptn_val&tdx...pdf";
218
219
220            /*** LOOP 3 - FINALLY, A Graph ****************************
221             *** - Multiple pages in case of many visits/treatments ***
222             **********************************************************/
223              %local vdx nxtvis;
224              %let vdx=1;
225              %do %while (%qscan(&boxplot_timept_ranges,&vdx,|) ne );
226                %let nxtvis = %qscan(&boxplot_timept_ranges,&vdx,|);
227
228                %util_get_reference_lines(css_plot_tp (where=( &nxtvis )),
229                                          nxt_vrefs,
230                                          low_var  =&lo_var,
231                                          high_var =&hi_var,
232                                          ref_lines=&ref_lines)
233
234                proc shewhart data=css_plot_tp (where=( &nxtvis ));
235                  boxchart &m_var * timept (max q3 median q1 min std mean n trtp) = trtp /
236                           annotate = css_annotate (where=( %sysfunc(tranwrd(&nxtvis, timept, x)) ))
237                           boxstyle = schematic
238                           notches
239                           nolegend
240                           ltmargin = 5
241                           blockpos = 3
242                           blocklabelpos = left
243                           blocklabtype=scaled
244                           blockrep
245                           haxis=axis1
246                           vaxis=axis2
247                           %if %length(&nxt_vrefs) > 0 %then
248                             vref=&nxt_vrefs
249                             cvref=RED
250                           ;
251                           idsymbol=square
252                           idcolor=black
253                           nolimits
254                           readphase = all
255                           phaseref
256                           phaselabtype=scaled
257                           phaselegend;
258
259                  label &m_var  = "&&paramcd_lab&pdx"
260                        timept  = 'Visit'
261                        trtp    = 'Treatment'
262                        n       = 'n'
263                        mean    = 'Mean'
264                        std     = 'Std'
265                        median  = 'Median'
266                        min     = 'Min'
267                        max     = 'Max'
268                        q1      = 'Q1'
269                        q3      = 'Q3';
270                  format mean %scan(&util_value_format, 1, %str( )) std %scan(&util_value_format, 2, %str( ));
271                run;
272
273                %let vdx=%eval(&vdx+1);
274              %end; %* --- LOOP 3 - Pages of box plots, VDX ---*;
275
276            *--- Release the PDF output file! ---*;
277              ods pdf close;
278              ods listing;
279
280          %end; %*--- LOOP 2 - Time Points, TDX ---*;
281
282        %end; %*--- LOOP 1 - Parameters, PDX ---*;
283
284
285        *--- Clean up temp data sets required to create box plots ---*;
286          %if &cleanup %then %util_delete_dsets(css_plot css_plot_tp css_nextparam css_nexttimept css_stats css_annotate);
287
288      %mend boxplot_each_param_tp;
289
290      %boxplot_each_param_tp;
MPRINT(BOXPLOT_EACH_PARAM_TP):   data css_nextparam;
MPRINT(BOXPLOT_EACH_PARAM_TP):   set css_anadata (where=(paramcd = "DIABP"));
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_ANADATA.
      WHERE paramcd='DIABP';
NOTE: The data set WORK.CSS_NEXTPARAM has 2027 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTPARAM, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ATPTN is a variable on data set CSS_NEXTPARAM.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTPARAM, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ATPT is a variable on data set CSS_NEXTPARAM.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTPARAM, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ATPTN is a variable on data set CSS_NEXTPARAM.
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   proc sql noprint;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   select count(unique(atptn)) into: atptn_n from css_nextparam ;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (UTIL_COUNT_UNIQUE_VALUES) Successfully created symbol ATPTN_N = 1
MPRINT(UTIL_LABELS_FROM_VAR):   *--- Create paired sequences of symbols containing values and labels ---*;
MPRINT(UTIL_LABELS_FROM_VAR):   proc sort data=css_nextparam out=css_lfv nodupkey;
MPRINT(UTIL_LABELS_FROM_VAR):   by atptn atpt;
MPRINT(UTIL_LABELS_FROM_VAR):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTPARAM.
NOTE: SAS sort was used.
NOTE: 2026 observations with duplicate key values were deleted.
NOTE: The data set WORK.CSS_LFV has 1 observations and 15 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


MPRINT(UTIL_LABELS_FROM_VAR):   data _null_;
MPRINT(UTIL_LABELS_FROM_VAR):   set css_lfv;
MPRINT(UTIL_LABELS_FROM_VAR):   by atptn;
MPRINT(UTIL_LABELS_FROM_VAR):   if not (first.atptn and last.atptn) then do;
MPRINT(UTIL_LABELS_FROM_VAR):   put "ERROR: (UTIL_LABELS_FROM_VAR) Each ATPTN value should have exacly one ATPT value." atptn= atpt=;
MPRINT(UTIL_LABELS_FROM_VAR):   put "ERROR: (UTIL_LABELS_FROM_VAR) Most likely you are missing some global symbols.";
MPRINT(UTIL_LABELS_FROM_VAR):   end;
MPRINT(UTIL_LABELS_FROM_VAR):   call symput(strip("atptn_val"!!put(_n_, 8.-L)), strip(atptn));
MPRINT(UTIL_LABELS_FROM_VAR):   call symput(strip("atptn_lab"!!put(_n_, 8.-L)), strip(atpt));
MPRINT(UTIL_LABELS_FROM_VAR):   run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      1:1
NOTE: There were 1 observations read from the data set WORK.CSS_LFV.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


MPRINT(UTIL_LABELS_FROM_VAR):   proc datasets library=WORK memtype=DATA nolist nodetails;
MPRINT(UTIL_LABELS_FROM_VAR):   delete css_lfv;
MPRINT(UTIL_LABELS_FROM_VAR):   quit;
NOTE: Deleting WORK.CSS_LFV (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (UTIL_LABELS_FROM_VAR) Successfully created symbols for Values and Labels from ATPTN and ATPT
MPRINT(BOXPLOT_EACH_PARAM_TP):   proc sort data=css_nextparam (where=(atptn = 815)) out=css_nexttimept;
MPRINT(BOXPLOT_EACH_PARAM_TP):   by avisitn trtpn;
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTPARAM.
      WHERE atptn=815;
NOTE: SAS sort was used.
NOTE: The data set WORK.CSS_NEXTTIMEPT has 2027 observations and 15 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTTIMEPT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_NEXTTIMEPT.
MPRINT(UTIL_GET_VAR_MIN_MAX):   proc sql noprint;
MPRINT(UTIL_GET_VAR_MIN_MAX):   select min(AVAL), max(AVAL) into :minval, :maxval from css_nexttimept ;
MPRINT(UTIL_GET_VAR_MIN_MAX):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds


NOTE: (UTIL_GET_VAR_MIN_MAX) Successfully created symbol AVAL_MIN_MAX = 40 109.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTTIMEPT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVISITN is a variable on data set CSS_NEXTTIMEPT.
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   proc sql noprint;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   select count(unique(avisitn)) into: visn from css_nexttimept ;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (UTIL_COUNT_UNIQUE_VALUES) Successfully created symbol VISN = 11
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTTIMEPT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_NEXTTIMEPT.
MPRINT(UTIL_VALUE_FORMAT):   data css_fmt;
MPRINT(UTIL_VALUE_FORMAT):   set css_nexttimept end=NoMore;
MPRINT(UTIL_VALUE_FORMAT):   retain max_int 0 max_dec 0;
MPRINT(UTIL_VALUE_FORMAT):   length int dec $8;
MPRINT(UTIL_VALUE_FORMAT):   valtxt = put(AVAL, best8.-L);
MPRINT(UTIL_VALUE_FORMAT):   int = scan(valtxt, 1, '.');
MPRINT(UTIL_VALUE_FORMAT):   dec = scan(valtxt, 2, '.');
MPRINT(UTIL_VALUE_FORMAT):   max_int = ifn(not missing(int) and length(int) > max_int, length(int), max_int);
MPRINT(UTIL_VALUE_FORMAT):   max_dec = ifn(not missing(dec) and length(dec) > max_dec, length(dec), max_dec);
MPRINT(UTIL_VALUE_FORMAT):   if NoMore then do;
MPRINT(UTIL_VALUE_FORMAT):   meanfmt = strip(put(max_int+max_dec+2,8.-L))!!'.'!!strip(put(max_dec+1,8.-L));
MPRINT(UTIL_VALUE_FORMAT):   stdvfmt = strip(put(max_int+max_dec+3,8.-L))!!'.'!!strip(put(max_dec+2,8.-L));
MPRINT(UTIL_VALUE_FORMAT):   call symput('util_value_format', strip(meanfmt)!!' '!!strip(stdvfmt));
MPRINT(UTIL_VALUE_FORMAT):   end;
MPRINT(UTIL_VALUE_FORMAT):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTTIMEPT.
NOTE: The data set WORK.CSS_FMT has 2027 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


MPRINT(UTIL_VALUE_FORMAT):   proc datasets library=WORK memtype=DATA nolist nodetails;
MPRINT(UTIL_VALUE_FORMAT):   delete css_fmt;
MPRINT(UTIL_VALUE_FORMAT):   quit;

NOTE: Deleting WORK.CSS_FMT (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds


NOTE: (UTIL_VALUE_FORMAT) Successfully created symbol UTIL_VALUE_FORMAT = 5.1 6.2
MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Calculate summary statistics, and merge onto measurement data for use as "block" variables ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   proc summary data=css_nexttimept noprint;
MPRINT(BOXPLOT_EACH_PARAM_TP):   by avisitn trtpn;
MPRINT(BOXPLOT_EACH_PARAM_TP):   var AVAL;
MPRINT(BOXPLOT_EACH_PARAM_TP):   output out=css_stats (drop=_type_) n=n mean=mean std=std median=median min=min max=max q1=q1 q3=q3;
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTTIMEPT.
NOTE: The data set WORK.CSS_STATS has 33 observations and 11 variables.
NOTE: PROCEDURE SUMMARY used (Total process time):
      real time           0.11 seconds
      cpu time            0.10 seconds


MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Reminder: PROC SHEWHART reads "phases" (visits) from a special _PHASE_ variable ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   data css_plot (rename=(avisit=_PHASE_));
MPRINT(BOXPLOT_EACH_PARAM_TP):   merge css_nexttimept (in=in_paramcd) css_stats (in=in_stats);
MPRINT(BOXPLOT_EACH_PARAM_TP):   by avisitn trtpn;
MPRINT(BOXPLOT_EACH_PARAM_TP):   label n = 'n' mean = 'Mean' std = 'Std Dev' min = 'Min' q1 = 'Q1' median = 'Median' q3 = 'Q3' max = 'Max';
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTTIMEPT.
NOTE: There were 33 observations read from the data set WORK.CSS_STATS.
NOTE: The data set WORK.CSS_PLOT has 2027 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVISITN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TRTPN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TRTP is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. MAX is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. Q3 is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. MEDIAN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. Q1 is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. MIN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. STD is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. MEAN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. N is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DEPEND) Result is PASS.
MPRINT(UTIL_PREP_SHEWHART_DATA):   data css_plot_tp;
MPRINT(UTIL_PREP_SHEWHART_DATA):   set css_plot end=NoMore;
MPRINT(UTIL_PREP_SHEWHART_DATA):   by avisitn trtpn;
MPRINT(UTIL_PREP_SHEWHART_DATA):   keep AVAL timept trtpn trtp ANRLO ANRHI max q3 median q1 min std mean n _PHASE_;
MPRINT(UTIL_PREP_SHEWHART_DATA):   retain timept 0;
MPRINT(UTIL_PREP_SHEWHART_DATA):   if first.avisitn then timept = floor(timept + 1);
MPRINT(UTIL_PREP_SHEWHART_DATA):   if first.trtpn then timept + (1/(1+3));
MPRINT(UTIL_PREP_SHEWHART_DATA):   *--- Create BOXPLOT_TIMEPT_RANGES, to limit number of boxes per plot page to &MAX_BOXES_PER_PAGE ---*;
MPRINT(UTIL_PREP_SHEWHART_DATA):   length boxplot_timept_ranges $200;
MPRINT(UTIL_PREP_SHEWHART_DATA):   retain max_boxes_per_page 20 boxes_on_page 0 last_timept_end 0 boxplot_timept_ranges ' ';
MPRINT(UTIL_PREP_SHEWHART_DATA):   if last.avisitn then do;
MPRINT(UTIL_PREP_SHEWHART_DATA):   boxes_on_page = boxes_on_page + 3;
MPRINT(UTIL_PREP_SHEWHART_DATA):   if boxes_on_page + 3 > max_boxes_per_page then do;
MPRINT(UTIL_PREP_SHEWHART_DATA):   *--- Current visit is enough for this plot, no more boxes, next visit will be too much ---*;
MPRINT(UTIL_PREP_SHEWHART_DATA):   boxplot_timept_ranges = strip(boxplot_timept_ranges) !!strip(compbl( put(last_timept_end,8.-L) !!' <= timept < '!! put(ceil(timept),8.-L) )) !!'|';
MPRINT(UTIL_PREP_SHEWHART_DATA):   boxes_on_page = 0;
MPRINT(UTIL_PREP_SHEWHART_DATA):   last_timept_end = timept;
MPRINT(UTIL_PREP_SHEWHART_DATA):   end;
MPRINT(UTIL_PREP_SHEWHART_DATA):   else if NoMore then do;
MPRINT(UTIL_PREP_SHEWHART_DATA):   boxplot_timept_ranges = strip(boxplot_timept_ranges) !!strip(compbl( put(last_timept_end,8.-L) !!' <= timept < ' !!put(timept,8.-L) ))!!'|';
MPRINT(UTIL_PREP_SHEWHART_DATA):   end;
MPRINT(UTIL_PREP_SHEWHART_DATA):   end;
MPRINT(UTIL_PREP_SHEWHART_DATA):   if NoMore then call symput('boxplot_timept_ranges', strip(boxplot_timept_ranges));
MPRINT(UTIL_PREP_SHEWHART_DATA):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_PLOT.
NOTE: The data set WORK.CSS_PLOT_TP has 2027 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.12 seconds
      cpu time            0.12 seconds


Note: (UTIL_PREP_SHEWHART_DATA) Default TIMEPT ranges for each plot produces, limiting to 20 boxes max per page.
Note: (UTIL_PREP_SHEWHART_DATA) BOXPLOT_TIMEPT_RANGES set to: 0 <= timept < 7|7 <= timept < 12|
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TIMEPT is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRLO is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRHI is a variable on data set CSS_PLOT_TP.
MPRINT(UTIL_ANNOTATE_OUTLIERS):   data css_annotate (keep=function hsys text size color x xsys y ysys);
MPRINT(UTIL_ANNOTATE_OUTLIERS):   set css_plot_tp;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   function = 'SYMBOL';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * On the horizontal axis (typically TimePT), introduce user-selected jitter *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   x = TIMEPT;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   y = AVAL;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * jitter size is based on ±8% of spacing used for PROC SHEWHART boxplot., *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   jitter = 0.08 / (1+3);
MPRINT(UTIL_ANNOTATE_OUTLIERS):   jitter = ranuni(29507) * jitter;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   if ranuni(41385) > 0.5 then jitter = -1 * jitter;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   x = x + jitter;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * SIZE variable is percentage of graphic space *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   hsys = '3';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   size = 1;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * X and Y variables contain data values *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   xsys = '2';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   ysys = '2';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * ANNOTATE non-missing obs with valid LOW and HIGH limits *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   if (n(y, ANRLO) = 2 and y < ANRLO) or (n(ANRHI, y) = 2 and ANRHI < y);
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * Draw a filled DOT with user-selected COLOR *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   length color $5 text $6;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   color = "RED";
MPRINT(UTIL_ANNOTATE_OUTLIERS):   text = 'DOT';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   OUTPUT;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_PLOT_TP.
NOTE: The data set WORK.CSS_ANNOTATE has 160 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds


NOTE: (UTIL_ANNOTATE_OUTLIERS) Successfully created annotate data set CSS_ANNOTATE.
MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Graphics Settings - Default HSIZE and VSIZE are suitable for A4 and letter ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   options orientation=landscape;
MPRINT(BOXPLOT_EACH_PARAM_TP):   goptions reset=all device=pdf;
MPRINT(BOXPLOT_EACH_PARAM_TP):   title justify=left height=1.2 "Box Plot - Diastolic Blood Pressure (mmHg) by Visit, Analysis
Timepoint: AFTER LYING DOWN FOR 5 MINUTES";
MPRINT(BOXPLOT_EACH_PARAM_TP):   footnote1 justify=left height=1.0 'Box plot type=schematic, the box shows median,
interquartile range (IQR, edge of the bar), min and max';
MPRINT(BOXPLOT_EACH_PARAM_TP):   footnote2 justify=left height=1.0 'within 1.5 IQR below 25% and above 75% (ends of the
whisker). Values outside the 1.5 IQR below 25% and';
MPRINT(BOXPLOT_EACH_PARAM_TP):   footnote3 justify=left height=1.0 'above 75% are shown as outliers. Means plotted as different
symbols by treatments.';
MPRINT(BOXPLOT_EACH_PARAM_TP):   axis1 value=none label=none major=none minor=none;
MPRINT(BOXPLOT_EACH_PARAM_TP):   axis2 order=(
MPRINT(UTIL_AXIS_ORDER):   40 to 110 by 10
MPRINT(BOXPLOT_EACH_PARAM_TP):   );
MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- ODS PDF destination (Traditional Graphics, No ODS or Listing output) ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   ODS GRAPHICS OFF;
MPRINT(BOXPLOT_EACH_PARAM_TP):   ODS LISTING CLOSE;
MPRINT(BOXPLOT_EACH_PARAM_TP):   ods pdf author='PhUSE/CSS Standard Analysis Library' subject='PhUSE/CSS Measures of Central
Tendency' title="Boxplot of Diastolic Blood Pressure (mmHg) by Visit for Analysis Timepoint AFTER LYING DOWN FOR 5 MINUTES"
file="C:\CSS\phuse-scripts\whitepapers\WPCT\outputs_sas\WPCT-F.07.01-sas92-QCshewhart_Box_plot_DIABP_by_visit_for_timepoint_815.
pdf";
NOTE: Writing ODS PDF output to DISK destination
      "C:\CSS\phuse-scripts\whitepapers\WPCT\outputs_sas\WPCT-F.07.01-sas92-QCshewhart_Box_plot_DIABP_by_visit_for_timepoint_815
      .pdf", printer "PDF".
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRLO is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRHI is a variable on data set CSS_PLOT_TP.
MPRINT(UTIL_GET_REFERENCE_LINES):   proc sql noprint;
MPRINT(UTIL_GET_REFERENCE_LINES):   select distinct ANRLO, ANRHI, count(ANRLO)+nmiss(ANRLO) into :lo_vals separated by ', ',
:hi_vals separated by ', ', :val_counts separated by ' ' from css_plot_tp (where=( 0 <= timept < 7 )) where n(ANRLO, ANRHI) > 0
group by ANRLO, ANRHI;
NOTE: SAS threaded sort was used.
MPRINT(UTIL_GET_REFERENCE_LINES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds


NOTE: (UTIL_GET_REFERENCE_LINES) 1 distinct reference ranges in css_plot_tp (where=( 0 <= timept < 7 )).
NOTE: (UTIL_GET_REFERENCE_LINES) LOW , HIGH (number of observations)
NOTE: (UTIL_GET_REFERENCE_LINES) 60 , 90 (1298)
NOTE: (UTIL_GET_REFERENCE_LINES) If you see duplicate values, check the HEX values in your data.
MPRINT(UTIL_GET_REFERENCE_LINES):   *--- Use data step and sort to clean up this list of reference lines (Unique, sorted
Ascending) ---*;
MPRINT(UTIL_GET_REFERENCE_LINES):   data grl_temp;
MPRINT(UTIL_GET_REFERENCE_LINES):   do val = 60, 90 ;
MPRINT(UTIL_GET_REFERENCE_LINES):   OUTPUT;
MPRINT(UTIL_GET_REFERENCE_LINES):   end;
MPRINT(UTIL_GET_REFERENCE_LINES):   run;

NOTE: The data set WORK.GRL_TEMP has 2 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


MPRINT(UTIL_GET_REFERENCE_LINES):   proc sql noprint;
MPRINT(UTIL_GET_REFERENCE_LINES):   select distinct val into :nxt_vrefs separated by ' ' from grl_temp where not missing(val)
order by val;
MPRINT(UTIL_GET_REFERENCE_LINES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


MPRINT(UTIL_GET_REFERENCE_LINES):   proc datasets library=WORK memtype=DATA nolist nodetails;
MPRINT(UTIL_GET_REFERENCE_LINES):   delete grl_temp;
MPRINT(UTIL_GET_REFERENCE_LINES):   quit;

NOTE: Deleting WORK.GRL_TEMP (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (UTIL_GET_REFERENCE_LINES) Successfully created macro var NXT_VREFS with reference values (60 90).
MPRINT(BOXPLOT_EACH_PARAM_TP):   proc shewhart data=css_plot_tp (where=( 0 <= timept < 7 ));
MPRINT(BOXPLOT_EACH_PARAM_TP):   boxchart AVAL * timept (max q3 median q1 min std mean n trtp) = trtp / annotate = css_annotate
(where=( 0 <= x < 7 )) boxstyle = schematic notches nolegend ltmargin = 5 blockpos = 3 blocklabelpos = left blocklabtype=scaled
blockrep haxis=axis1 vaxis=axis2 vref=60 90 cvref=RED idsymbol=square idcolor=black nolimits readphase = all phaseref
phaselabtype=scaled phaselegend;
MPRINT(BOXPLOT_EACH_PARAM_TP):   label AVAL = "Diastolic Blood Pressure (mmHg)" timept = 'Visit' trtp = 'Treatment' n = 'n'
mean = 'Mean' std = 'Std' median = 'Median' min = 'Min' max = 'Max' q1 = 'Q1' q3 = 'Q3';
MPRINT(BOXPLOT_EACH_PARAM_TP):   format mean 5.1 std 6.2;
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: In a BOXCHART statement, the process standard deviation is estimated from subgroup standard deviations by default. You
      can specify the RANGES option to estimate the process standard deviation using subgroup ranges.
NOTE: Processing beginning for BOXCHART statement number 1.
NOTE: Three-sigma limits are assumed.
NOTE: TYPE=ESTIMATE is assumed for the process mean and standard deviation used to compute the control limits.
NOTE: There were 1298 observations read from the data set WORK.CSS_PLOT_TP.
      WHERE (timept>=0 and timept<7);
NOTE: There were 108 observations read from the data set WORK.CSS_ANNOTATE.
      WHERE (x>=0 and x<7);
NOTE: PROCEDURE SHEWHART used (Total process time):
      real time           0.43 seconds
      cpu time            0.42 seconds


NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRLO is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRHI is a variable on data set CSS_PLOT_TP.
MPRINT(UTIL_GET_REFERENCE_LINES):   proc sql noprint;
MPRINT(UTIL_GET_REFERENCE_LINES):   select distinct ANRLO, ANRHI, count(ANRLO)+nmiss(ANRLO) into :lo_vals separated by ', ',
:hi_vals separated by ', ', :val_counts separated by ' ' from css_plot_tp (where=( 7 <= timept < 12 )) where n(ANRLO, ANRHI) >
0 group by ANRLO, ANRHI;
NOTE: SAS threaded sort was used.
MPRINT(UTIL_GET_REFERENCE_LINES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (UTIL_GET_REFERENCE_LINES) 1 distinct reference ranges in css_plot_tp (where=( 7 <= timept < 12 )).
NOTE: (UTIL_GET_REFERENCE_LINES) LOW , HIGH (number of observations)
NOTE: (UTIL_GET_REFERENCE_LINES) 60 , 90 (729)
NOTE: (UTIL_GET_REFERENCE_LINES) If you see duplicate values, check the HEX values in your data.
MPRINT(UTIL_GET_REFERENCE_LINES):   *--- Use data step and sort to clean up this list of reference lines (Unique, sorted
Ascending) ---*;
MPRINT(UTIL_GET_REFERENCE_LINES):   data grl_temp;
MPRINT(UTIL_GET_REFERENCE_LINES):   do val = 60, 90 ;
MPRINT(UTIL_GET_REFERENCE_LINES):   OUTPUT;
MPRINT(UTIL_GET_REFERENCE_LINES):   end;
MPRINT(UTIL_GET_REFERENCE_LINES):   run;

NOTE: The data set WORK.GRL_TEMP has 2 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


MPRINT(UTIL_GET_REFERENCE_LINES):   proc sql noprint;
MPRINT(UTIL_GET_REFERENCE_LINES):   select distinct val into :nxt_vrefs separated by ' ' from grl_temp where not missing(val)
order by val;
MPRINT(UTIL_GET_REFERENCE_LINES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


MPRINT(UTIL_GET_REFERENCE_LINES):   proc datasets library=WORK memtype=DATA nolist nodetails;
MPRINT(UTIL_GET_REFERENCE_LINES):   delete grl_temp;
MPRINT(UTIL_GET_REFERENCE_LINES):   quit;

NOTE: Deleting WORK.GRL_TEMP (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (UTIL_GET_REFERENCE_LINES) Successfully created macro var NXT_VREFS with reference values (60 90).
MPRINT(BOXPLOT_EACH_PARAM_TP):   proc shewhart data=css_plot_tp (where=( 7 <= timept < 12 ));
MPRINT(BOXPLOT_EACH_PARAM_TP):   boxchart AVAL * timept (max q3 median q1 min std mean n trtp) = trtp / annotate = css_annotate
(where=( 7 <= x < 12 )) boxstyle = schematic notches nolegend ltmargin = 5 blockpos = 3 blocklabelpos = left
blocklabtype=scaled blockrep haxis=axis1 vaxis=axis2 vref=60 90 cvref=RED idsymbol=square idcolor=black nolimits readphase =
all phaseref phaselabtype=scaled phaselegend;
MPRINT(BOXPLOT_EACH_PARAM_TP):   label AVAL = "Diastolic Blood Pressure (mmHg)" timept = 'Visit' trtp = 'Treatment' n = 'n'
mean = 'Mean' std = 'Std' median = 'Median' min = 'Min' max = 'Max' q1 = 'Q1' q3 = 'Q3';
MPRINT(BOXPLOT_EACH_PARAM_TP):   format mean 5.1 std 6.2;
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: In a BOXCHART statement, the process standard deviation is estimated from subgroup standard deviations by default. You
      can specify the RANGES option to estimate the process standard deviation using subgroup ranges.
NOTE: Processing beginning for BOXCHART statement number 1.
NOTE: Three-sigma limits are assumed.
NOTE: TYPE=ESTIMATE is assumed for the process mean and standard deviation used to compute the control limits.
NOTE: There were 729 observations read from the data set WORK.CSS_PLOT_TP.
      WHERE (timept>=7 and timept<12);
NOTE: There were 52 observations read from the data set WORK.CSS_ANNOTATE.
      WHERE (x>=7 and x<12);
NOTE: PROCEDURE SHEWHART used (Total process time):
      real time           0.14 seconds
      cpu time            0.14 seconds


MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Release the PDF output file! ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   ods pdf close;
NOTE: ODS PDF printed 2 pages to
      C:\CSS\phuse-scripts\whitepapers\WPCT\outputs_sas\WPCT-F.07.01-sas92-QCshewhart_Box_plot_DIABP_by_visit_for_timepoint_815.
      pdf.
MPRINT(BOXPLOT_EACH_PARAM_TP):   ods listing;
MPRINT(BOXPLOT_EACH_PARAM_TP):   data css_nextparam;
MPRINT(BOXPLOT_EACH_PARAM_TP):   set css_anadata (where=(paramcd = "SYSBP"));
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_ANADATA.
      WHERE paramcd='SYSBP';
NOTE: The data set WORK.CSS_NEXTPARAM has 2027 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTPARAM, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ATPTN is a variable on data set CSS_NEXTPARAM.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTPARAM, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ATPT is a variable on data set CSS_NEXTPARAM.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTPARAM is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTPARAM, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ATPTN is a variable on data set CSS_NEXTPARAM.
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   proc sql noprint;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   select count(unique(atptn)) into: atptn_n from css_nextparam ;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (UTIL_COUNT_UNIQUE_VALUES) Successfully created symbol ATPTN_N = 1
MPRINT(UTIL_LABELS_FROM_VAR):   *--- Create paired sequences of symbols containing values and labels ---*;
MPRINT(UTIL_LABELS_FROM_VAR):   proc sort data=css_nextparam out=css_lfv nodupkey;
MPRINT(UTIL_LABELS_FROM_VAR):   by atptn atpt;
MPRINT(UTIL_LABELS_FROM_VAR):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTPARAM.
NOTE: SAS sort was used.
NOTE: 2026 observations with duplicate key values were deleted.
NOTE: The data set WORK.CSS_LFV has 1 observations and 15 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


MPRINT(UTIL_LABELS_FROM_VAR):   data _null_;
MPRINT(UTIL_LABELS_FROM_VAR):   set css_lfv;
MPRINT(UTIL_LABELS_FROM_VAR):   by atptn;
MPRINT(UTIL_LABELS_FROM_VAR):   if not (first.atptn and last.atptn) then do;
MPRINT(UTIL_LABELS_FROM_VAR):   put "ERROR: (UTIL_LABELS_FROM_VAR) Each ATPTN value should have exacly one ATPT value." atptn=
atpt=;
MPRINT(UTIL_LABELS_FROM_VAR):   put "ERROR: (UTIL_LABELS_FROM_VAR) Most likely you are missing some global symbols.";
MPRINT(UTIL_LABELS_FROM_VAR):   end;
MPRINT(UTIL_LABELS_FROM_VAR):   call symput(strip("atptn_val"!!put(_n_, 8.-L)), strip(atptn));
MPRINT(UTIL_LABELS_FROM_VAR):   call symput(strip("atptn_lab"!!put(_n_, 8.-L)), strip(atpt));
MPRINT(UTIL_LABELS_FROM_VAR):   run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      1:1
NOTE: There were 1 observations read from the data set WORK.CSS_LFV.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


MPRINT(UTIL_LABELS_FROM_VAR):   proc datasets library=WORK memtype=DATA nolist nodetails;
MPRINT(UTIL_LABELS_FROM_VAR):   delete css_lfv;
MPRINT(UTIL_LABELS_FROM_VAR):   quit;
NOTE: Deleting WORK.CSS_LFV (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (UTIL_LABELS_FROM_VAR) Successfully created symbols for Values and Labels from ATPTN and ATPT
MPRINT(BOXPLOT_EACH_PARAM_TP):   proc sort data=css_nextparam (where=(atptn = 816)) out=css_nexttimept;
MPRINT(BOXPLOT_EACH_PARAM_TP):   by avisitn trtpn;
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTPARAM.
      WHERE atptn=816;
NOTE: SAS sort was used.
NOTE: The data set WORK.CSS_NEXTTIMEPT has 2027 observations and 15 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTTIMEPT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_NEXTTIMEPT.
MPRINT(UTIL_GET_VAR_MIN_MAX):   proc sql noprint;
MPRINT(UTIL_GET_VAR_MIN_MAX):   select min(AVAL), max(AVAL) into :minval, :maxval from css_nexttimept ;
MPRINT(UTIL_GET_VAR_MIN_MAX):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (UTIL_GET_VAR_MIN_MAX) Successfully created symbol AVAL_MIN_MAX = 80 202.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTTIMEPT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVISITN is a variable on data set CSS_NEXTTIMEPT.
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   proc sql noprint;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   select count(unique(avisitn)) into: visn from css_nexttimept ;
MPRINT(UTIL_COUNT_UNIQUE_VALUES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (UTIL_COUNT_UNIQUE_VALUES) Successfully created symbol VISN = 11
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_NEXTTIMEPT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_NEXTTIMEPT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_NEXTTIMEPT.
MPRINT(UTIL_VALUE_FORMAT):   data css_fmt;
MPRINT(UTIL_VALUE_FORMAT):   set css_nexttimept end=NoMore;
MPRINT(UTIL_VALUE_FORMAT):   retain max_int 0 max_dec 0;
MPRINT(UTIL_VALUE_FORMAT):   length int dec $8;
MPRINT(UTIL_VALUE_FORMAT):   valtxt = put(AVAL, best8.-L);
MPRINT(UTIL_VALUE_FORMAT):   int = scan(valtxt, 1, '.');
MPRINT(UTIL_VALUE_FORMAT):   dec = scan(valtxt, 2, '.');
MPRINT(UTIL_VALUE_FORMAT):   max_int = ifn(not missing(int) and length(int) > max_int, length(int), max_int);
MPRINT(UTIL_VALUE_FORMAT):   max_dec = ifn(not missing(dec) and length(dec) > max_dec, length(dec), max_dec);
MPRINT(UTIL_VALUE_FORMAT):   if NoMore then do;
MPRINT(UTIL_VALUE_FORMAT):   meanfmt = strip(put(max_int+max_dec+2,8.-L))!!'.'!!strip(put(max_dec+1,8.-L));
MPRINT(UTIL_VALUE_FORMAT):   stdvfmt = strip(put(max_int+max_dec+3,8.-L))!!'.'!!strip(put(max_dec+2,8.-L));
MPRINT(UTIL_VALUE_FORMAT):   call symput('util_value_format', strip(meanfmt)!!' '!!strip(stdvfmt));
MPRINT(UTIL_VALUE_FORMAT):   end;
MPRINT(UTIL_VALUE_FORMAT):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTTIMEPT.
NOTE: The data set WORK.CSS_FMT has 2027 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


MPRINT(UTIL_VALUE_FORMAT):   proc datasets library=WORK memtype=DATA nolist nodetails;
MPRINT(UTIL_VALUE_FORMAT):   delete css_fmt;
MPRINT(UTIL_VALUE_FORMAT):   quit;

NOTE: Deleting WORK.CSS_FMT (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds


NOTE: (UTIL_VALUE_FORMAT) Successfully created symbol UTIL_VALUE_FORMAT = 5.1 6.2
MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Calculate summary statistics, and merge onto measurement data for use as "block"
variables ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   proc summary data=css_nexttimept noprint;
MPRINT(BOXPLOT_EACH_PARAM_TP):   by avisitn trtpn;
MPRINT(BOXPLOT_EACH_PARAM_TP):   var AVAL;
MPRINT(BOXPLOT_EACH_PARAM_TP):   output out=css_stats (drop=_type_) n=n mean=mean std=std median=median min=min max=max q1=q1
q3=q3;
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTTIMEPT.
NOTE: The data set WORK.CSS_STATS has 33 observations and 11 variables.
NOTE: PROCEDURE SUMMARY used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Reminder: PROC SHEWHART reads "phases" (visits) from a special _PHASE_ variable ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   data css_plot (rename=(avisit=_PHASE_));
MPRINT(BOXPLOT_EACH_PARAM_TP):   merge css_nexttimept (in=in_paramcd) css_stats (in=in_stats);
MPRINT(BOXPLOT_EACH_PARAM_TP):   by avisitn trtpn;
MPRINT(BOXPLOT_EACH_PARAM_TP):   label n = 'n' mean = 'Mean' std = 'Std Dev' min = 'Min' q1 = 'Q1' median = 'Median' q3 = 'Q3'
max = 'Max';
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_NEXTTIMEPT.
NOTE: There were 33 observations read from the data set WORK.CSS_STATS.
NOTE: The data set WORK.CSS_PLOT has 2027 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVISITN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TRTPN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TRTP is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. MAX is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. Q3 is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. MEDIAN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. Q1 is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. MIN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. STD is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. MEAN is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. N is a variable on data set CSS_PLOT.
NOTE: (ASSERT_DEPEND) Result is PASS.
MPRINT(UTIL_PREP_SHEWHART_DATA):   data css_plot_tp;
MPRINT(UTIL_PREP_SHEWHART_DATA):   set css_plot end=NoMore;
MPRINT(UTIL_PREP_SHEWHART_DATA):   by avisitn trtpn;
MPRINT(UTIL_PREP_SHEWHART_DATA):   keep AVAL timept trtpn trtp ANRLO ANRHI max q3 median q1 min std mean n _PHASE_;
MPRINT(UTIL_PREP_SHEWHART_DATA):   retain timept 0;
MPRINT(UTIL_PREP_SHEWHART_DATA):   if first.avisitn then timept = floor(timept + 1);
MPRINT(UTIL_PREP_SHEWHART_DATA):   if first.trtpn then timept + (1/(1+3));
MPRINT(UTIL_PREP_SHEWHART_DATA):   *--- Create BOXPLOT_TIMEPT_RANGES, to limit number of boxes per plot page to
&MAX_BOXES_PER_PAGE ---*;
MPRINT(UTIL_PREP_SHEWHART_DATA):   length boxplot_timept_ranges $200;
MPRINT(UTIL_PREP_SHEWHART_DATA):   retain max_boxes_per_page 20 boxes_on_page 0 last_timept_end 0 boxplot_timept_ranges ' ';
MPRINT(UTIL_PREP_SHEWHART_DATA):   if last.avisitn then do;
MPRINT(UTIL_PREP_SHEWHART_DATA):   boxes_on_page = boxes_on_page + 3;
MPRINT(UTIL_PREP_SHEWHART_DATA):   if boxes_on_page + 3 > max_boxes_per_page then do;
MPRINT(UTIL_PREP_SHEWHART_DATA):   *--- Current visit is enough for this plot, no more boxes, next visit will be too much ---*;
MPRINT(UTIL_PREP_SHEWHART_DATA):   boxplot_timept_ranges = strip(boxplot_timept_ranges) !!strip(compbl(
put(last_timept_end,8.-L) !!' <= timept < '!! put(ceil(timept),8.-L) )) !!'|';
MPRINT(UTIL_PREP_SHEWHART_DATA):   boxes_on_page = 0;
MPRINT(UTIL_PREP_SHEWHART_DATA):   last_timept_end = timept;
MPRINT(UTIL_PREP_SHEWHART_DATA):   end;
MPRINT(UTIL_PREP_SHEWHART_DATA):   else if NoMore then do;
MPRINT(UTIL_PREP_SHEWHART_DATA):   boxplot_timept_ranges = strip(boxplot_timept_ranges) !!strip(compbl(
put(last_timept_end,8.-L) !!' <= timept < ' !!put(timept,8.-L) ))!!'|';
MPRINT(UTIL_PREP_SHEWHART_DATA):   end;
MPRINT(UTIL_PREP_SHEWHART_DATA):   end;
MPRINT(UTIL_PREP_SHEWHART_DATA):   if NoMore then call symput('boxplot_timept_ranges', strip(boxplot_timept_ranges));
MPRINT(UTIL_PREP_SHEWHART_DATA):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_PLOT.
NOTE: The data set WORK.CSS_PLOT_TP has 2027 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds


Note: (UTIL_PREP_SHEWHART_DATA) Default TIMEPT ranges for each plot produces, limiting to 20 boxes max per page.
Note: (UTIL_PREP_SHEWHART_DATA) BOXPLOT_TIMEPT_RANGES set to: 0 <= timept < 7|7 <= timept < 12|
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. TIMEPT is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. AVAL is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRLO is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRHI is a variable on data set CSS_PLOT_TP.
MPRINT(UTIL_ANNOTATE_OUTLIERS):   data css_annotate (keep=function hsys text size color x xsys y ysys);
MPRINT(UTIL_ANNOTATE_OUTLIERS):   set css_plot_tp;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   function = 'SYMBOL';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * On the horizontal axis (typically TimePT), introduce user-selected jitter *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   x = TIMEPT;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   y = AVAL;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * jitter size is based on ±8% of spacing used for PROC SHEWHART boxplot., *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   jitter = 0.08 / (1+3);
MPRINT(UTIL_ANNOTATE_OUTLIERS):   jitter = ranuni(29507) * jitter;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   if ranuni(41385) > 0.5 then jitter = -1 * jitter;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   x = x + jitter;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * SIZE variable is percentage of graphic space *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   hsys = '3';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   size = 1;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * X and Y variables contain data values *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   xsys = '2';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   ysys = '2';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * ANNOTATE non-missing obs with valid LOW and HIGH limits *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   if (n(y, ANRLO) = 2 and y < ANRLO) or (n(ANRHI, y) = 2 and ANRHI < y);
MPRINT(UTIL_ANNOTATE_OUTLIERS):   * Draw a filled DOT with user-selected COLOR *;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   length color $5 text $6;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   color = "RED";
MPRINT(UTIL_ANNOTATE_OUTLIERS):   text = 'DOT';
MPRINT(UTIL_ANNOTATE_OUTLIERS):   OUTPUT;
MPRINT(UTIL_ANNOTATE_OUTLIERS):   run;

NOTE: There were 2027 observations read from the data set WORK.CSS_PLOT_TP.
NOTE: The data set WORK.CSS_ANNOTATE has 0 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (UTIL_ANNOTATE_OUTLIERS) Successfully created annotate data set CSS_ANNOTATE.
MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Graphics Settings - Default HSIZE and VSIZE are suitable for A4 and letter ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   options orientation=landscape;
MPRINT(BOXPLOT_EACH_PARAM_TP):   goptions reset=all device=pdf;
MPRINT(BOXPLOT_EACH_PARAM_TP):   title justify=left height=1.2 "Box Plot - Systolic Blood Pressure (mmHg) by Visit, Analysis
Timepoint: AFTER STANDING FOR 1 MINUTE";
MPRINT(BOXPLOT_EACH_PARAM_TP):   footnote1 justify=left height=1.0 'Box plot type=schematic, the box shows median,
interquartile range (IQR, edge of the bar), min and max';
MPRINT(BOXPLOT_EACH_PARAM_TP):   footnote2 justify=left height=1.0 'within 1.5 IQR below 25% and above 75% (ends of the
whisker). Values outside the 1.5 IQR below 25% and';
MPRINT(BOXPLOT_EACH_PARAM_TP):   footnote3 justify=left height=1.0 'above 75% are shown as outliers. Means plotted as different
symbols by treatments.';
MPRINT(BOXPLOT_EACH_PARAM_TP):   axis1 value=none label=none major=none minor=none;
MPRINT(BOXPLOT_EACH_PARAM_TP):   axis2 order=(
MPRINT(UTIL_AXIS_ORDER):   80 to 220 by 20
MPRINT(BOXPLOT_EACH_PARAM_TP):   );
MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- ODS PDF destination (Traditional Graphics, No ODS or Listing output) ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   ODS GRAPHICS OFF;
MPRINT(BOXPLOT_EACH_PARAM_TP):   ODS LISTING CLOSE;
MPRINT(BOXPLOT_EACH_PARAM_TP):   ods pdf author='PhUSE/CSS Standard Analysis Library' subject='PhUSE/CSS Measures of Central
Tendency' title="Boxplot of Systolic Blood Pressure (mmHg) by Visit for Analysis Timepoint AFTER STANDING FOR 1 MINUTE"
file="C:\CSS\phuse-scripts\whitepapers\WPCT\outputs_sas\WPCT-F.07.01-sas92-QCshewhart_Box_plot_SYSBP_by_visit_for_timepoint_816.
pdf";
NOTE: Writing ODS PDF output to DISK destination
      "C:\CSS\phuse-scripts\whitepapers\WPCT\outputs_sas\WPCT-F.07.01-sas92-QCshewhart_Box_plot_SYSBP_by_visit_for_timepoint_816
      .pdf", printer "PDF".
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRLO is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRHI is a variable on data set CSS_PLOT_TP.
MPRINT(UTIL_GET_REFERENCE_LINES):   proc sql noprint;
MPRINT(UTIL_GET_REFERENCE_LINES):   select distinct ANRLO, ANRHI, count(ANRLO)+nmiss(ANRLO) into :lo_vals separated by ', ',
:hi_vals separated by ', ', :val_counts separated by ' ' from css_plot_tp (where=( 0 <= timept < 7 )) where n(ANRLO, ANRHI) > 0
group by ANRLO, ANRHI;
NOTE: SAS threaded sort was used.
NOTE: No rows were selected.
MPRINT(UTIL_GET_REFERENCE_LINES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds


NOTE: (UTIL_GET_REFERENCE_LINES) 0 distinct reference ranges in css_plot_tp (where=( 0 <= timept < 7 )).
NOTE: (UTIL_GET_REFERENCE_LINES) LOW , HIGH (number of observations)
NOTE: (UTIL_GET_REFERENCE_LINES) If you see duplicate values, check the HEX values in your data.
NOTE: (UTIL_GET_REFERENCE_LINES) Non-uniform reference limits detected, so suppressing reference lines.
NOTE: (UTIL_GET_REFERENCE_LINES) Successfully created macro var NXT_VREFS with reference values ().
MPRINT(BOXPLOT_EACH_PARAM_TP):   proc shewhart data=css_plot_tp (where=( 0 <= timept < 7 ));
MPRINT(BOXPLOT_EACH_PARAM_TP):   boxchart AVAL * timept (max q3 median q1 min std mean n trtp) = trtp / annotate = css_annotate
(where=( 0 <= x < 7 )) boxstyle = schematic notches nolegend ltmargin = 5 blockpos = 3 blocklabelpos = left blocklabtype=scaled
blockrep haxis=axis1 vaxis=axis2 idsymbol=square idcolor=black nolimits readphase = all phaseref phaselabtype=scaled
phaselegend;
MPRINT(BOXPLOT_EACH_PARAM_TP):   label AVAL = "Systolic Blood Pressure (mmHg)" timept = 'Visit' trtp = 'Treatment' n = 'n' mean
= 'Mean' std = 'Std' median = 'Median' min = 'Min' max = 'Max' q1 = 'Q1' q3 = 'Q3';
MPRINT(BOXPLOT_EACH_PARAM_TP):   format mean 5.1 std 6.2;
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: In a BOXCHART statement, the process standard deviation is estimated from subgroup standard deviations by default. You
      can specify the RANGES option to estimate the process standard deviation using subgroup ranges.
NOTE: Processing beginning for BOXCHART statement number 1.
NOTE: Three-sigma limits are assumed.
NOTE: TYPE=ESTIMATE is assumed for the process mean and standard deviation used to compute the control limits.
NOTE: No observations in data set WORK.CSS_ANNOTATE.
NOTE: ANNOTATE= DATASET PROCESSING ERROR. NO OBSERVATIONS IN INPUT DATASET. ANNOTATION WILL NOT BE PERFORMED.
NOTE: There were 1298 observations read from the data set WORK.CSS_PLOT_TP.
      WHERE (timept>=0 and timept<7);
NOTE: PROCEDURE SHEWHART used (Total process time):
      real time           0.20 seconds
      cpu time            0.20 seconds


NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRLO is a variable on data set CSS_PLOT_TP.
NOTE: (ASSERT_DSET_EXIST) Result is PASS. Data set CSS_PLOT_TP is accessible.
NOTE: (ASSERT_VAR_EXIST) If DMS process locks data set CSS_PLOT_TP, try closing data set ID 1
NOTE: (ASSERT_VAR_EXIST) Result is PASS. ANRHI is a variable on data set CSS_PLOT_TP.
MPRINT(UTIL_GET_REFERENCE_LINES):   proc sql noprint;
MPRINT(UTIL_GET_REFERENCE_LINES):   select distinct ANRLO, ANRHI, count(ANRLO)+nmiss(ANRLO) into :lo_vals separated by ', ',
:hi_vals separated by ', ', :val_counts separated by ' ' from css_plot_tp (where=( 7 <= timept < 12 )) where n(ANRLO, ANRHI) >
0 group by ANRLO, ANRHI;
NOTE: SAS threaded sort was used.
NOTE: No rows were selected.
MPRINT(UTIL_GET_REFERENCE_LINES):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: (UTIL_GET_REFERENCE_LINES) 0 distinct reference ranges in css_plot_tp (where=( 7 <= timept < 12 )).
NOTE: (UTIL_GET_REFERENCE_LINES) LOW , HIGH (number of observations)
NOTE: (UTIL_GET_REFERENCE_LINES) If you see duplicate values, check the HEX values in your data.
NOTE: (UTIL_GET_REFERENCE_LINES) Non-uniform reference limits detected, so suppressing reference lines.
NOTE: (UTIL_GET_REFERENCE_LINES) Successfully created macro var NXT_VREFS with reference values ().
MPRINT(BOXPLOT_EACH_PARAM_TP):   proc shewhart data=css_plot_tp (where=( 7 <= timept < 12 ));
MPRINT(BOXPLOT_EACH_PARAM_TP):   boxchart AVAL * timept (max q3 median q1 min std mean n trtp) = trtp / annotate = css_annotate
(where=( 7 <= x < 12 )) boxstyle = schematic notches nolegend ltmargin = 5 blockpos = 3 blocklabelpos = left
blocklabtype=scaled blockrep haxis=axis1 vaxis=axis2 idsymbol=square idcolor=black nolimits readphase = all phaseref
phaselabtype=scaled phaselegend;
MPRINT(BOXPLOT_EACH_PARAM_TP):   label AVAL = "Systolic Blood Pressure (mmHg)" timept = 'Visit' trtp = 'Treatment' n = 'n' mean
= 'Mean' std = 'Std' median = 'Median' min = 'Min' max = 'Max' q1 = 'Q1' q3 = 'Q3';
MPRINT(BOXPLOT_EACH_PARAM_TP):   format mean 5.1 std 6.2;
MPRINT(BOXPLOT_EACH_PARAM_TP):   run;

NOTE: In a BOXCHART statement, the process standard deviation is estimated from subgroup standard deviations by default. You
      can specify the RANGES option to estimate the process standard deviation using subgroup ranges.
NOTE: Processing beginning for BOXCHART statement number 1.
NOTE: Three-sigma limits are assumed.
NOTE: TYPE=ESTIMATE is assumed for the process mean and standard deviation used to compute the control limits.
NOTE: No observations in data set WORK.CSS_ANNOTATE.
NOTE: ANNOTATE= DATASET PROCESSING ERROR. NO OBSERVATIONS IN INPUT DATASET. ANNOTATION WILL NOT BE PERFORMED.
NOTE: There were 729 observations read from the data set WORK.CSS_PLOT_TP.
      WHERE (timept>=7 and timept<12);
NOTE: PROCEDURE SHEWHART used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds


MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Release the PDF output file! ---*;
MPRINT(BOXPLOT_EACH_PARAM_TP):   ods pdf close;
NOTE: ODS PDF printed 2 pages to
      C:\CSS\phuse-scripts\whitepapers\WPCT\outputs_sas\WPCT-F.07.01-sas92-QCshewhart_Box_plot_SYSBP_by_visit_for_timepoint_816.
      pdf.
MPRINT(BOXPLOT_EACH_PARAM_TP):   ods listing;
MPRINT(BOXPLOT_EACH_PARAM_TP):   *--- Clean up temp data sets required to create box plots ---*;
MPRINT(UTIL_DELETE_DSETS):   proc datasets library=WORK memtype=DATA nolist nodetails;
MPRINT(UTIL_DELETE_DSETS):   delete CSS_PLOT CSS_PLOT_TP CSS_NEXTPARAM CSS_NEXTTIMEPT CSS_STATS CSS_ANNOTATE;
MPRINT(UTIL_DELETE_DSETS):   quit;

NOTE: Deleting WORK.CSS_PLOT (memtype=DATA).
NOTE: Deleting WORK.CSS_PLOT_TP (memtype=DATA).
NOTE: Deleting WORK.CSS_NEXTPARAM (memtype=DATA).
NOTE: Deleting WORK.CSS_NEXTTIMEPT (memtype=DATA).
NOTE: Deleting WORK.CSS_STATS (memtype=DATA).
NOTE: Deleting WORK.CSS_ANNOTATE (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds


291
292    /*** END boxplotting ***/

